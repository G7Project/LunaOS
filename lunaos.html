<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAj9//ADDE/wC66/8AAGaPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABERAAAAAAARCIiRAAAAAQiEREiQAAAQhETNEQkAABCETRAAEQABCETQAAABAAEITQAAAAAAAQhNAAAAAAABCFAAAAAAAAAQkAAAAAAAABCQAAAAAAAAAQkAAAAAAAAAERAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA/D8AAPAPAADgBwAAwAMAAMBzAACB+wAAg/8AAIP/AACH/wAAx/8AAMf/AADj/wAA8f8AAP//AAD//wAA" rel="icon" type="image/x-icon" />
  <title>LunaOS</title>
  <style>
    body{
      background-image: linear-gradient(60deg, #29323c 0%, #485563 100%);
      color:white;
      font-family:'Open Sans', sans-serif;
      min-height:100vh;
      overflow:hidden;
      margin:0;
      cursor: url('data:image/x-icon;base64,AAACAAEAICAAAAAAAACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoGAxr//////////xoGAzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP8AAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////////xoGAzYAAAAAAAAAABoGAzb/////AAAA/wAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAD//////xoGAzYAAAAA/////wAAAP8AAAD//////xoGA0wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP8AAAD//////xoGAzb/////AAAA/wAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAA/wAAAP8AAAD//////wAAAP8AAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP///////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD//////xoGAzYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA//////8aBgM2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP//////GgYDNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD//////xoGAzYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAD/AAAA/wAAAP8AAAD/AAAA//////8aBgM2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP8AAAD/AAAA/wAAAP//////GgYDNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAA/wAAAP8AAAD//////xoGAzYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAD/AAAA//////8aBgM2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAP//////GgYDNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////////xoGAzYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8aBgM2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////5////8P///PD///xh///8If///AP///wAP//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3////8='), auto;
    }
    #page-container {
  position: relative;
  min-height: 100vh;
}

#content-wrap {
  padding-bottom: 2.5rem;    /* Footer height */
}

#taskbar {
  position: absolute;
  bottom: 0;
  left:0;
  width: 100%;
  height: 2.5rem;
  background:rgba(20,20,20,0.6);
  user-select: none;
  z-index:2;
}
    
     #window0,#window1,#window2,#window3,#window4,#window5,#window6,#window7 {
  position: absolute;
  z-index: 1;
  background-color: #f1f1f1;
  color:black;
  height:480px;
  width:576px;
  text-align: center;
  resize: both;
  overflow: hidden;
}
#window0header,#window1header,#window2header,#window3header,#window4header,#window5header,#window6header,#window7header {
  padding: 10px;
  cursor: move;
  z-index: 10;
  width: 100%;
  background-color: rgb(20,20,20);
  text-align:left; 
  color: #fff;
}

.taskbarico{
 font-size:2.5rem;
 user-select: none;
 border:none;
 background:none;
    }
    /* A seperator after the Apps Icon*/
.sep1{
  border-left: 1px solid gray;
  height: 700px; 
  position: absolute;
    }
.thinheader{
  font-weight:lighter;      
    }
code{
  background: rgb(60,60,80);
  
    }
a{
color:cyan;
    }
.confirm{
color:white;
border-color:green;
background:green;
    }
.deny{
color:white;
border-color:darkred;
background:darkred;
    }
#XWinButton{
background:rgb(165,60,60);
border:none;
color:white;
border-radius:8px;
    }
input:focus,
select:focus,
textarea:focus,
button:focus {
    outline: none;
}
.bkgblack{
      background:rgb(10,10,10);
      opacity:0.8;
      width:48px;
      border-radius:256px;
}
progress{
 border-radius:0px;
}
.filemgr_folder{
color:#DDD2B9;
font-size:48px;
}
.blur{
        filter: blur(8px);
  -webkit-filter: blur(8px);
    }
  </style>
</head>
  
<body id='body'>
  <div id='SPLASH_LUNAOS' style='text-align:center;' hidden>
    <h1 class='material-icons' style='font-size:256px;color:rgb(215,215,0);'>dark_mode</h1>
    <h1>LunaOS 1.0</h1>
  </div>
  <div id="page-container">
   <div id="content-wrap">
     <!-- SearchParty 1.0 (Kinda Slow, Want to improve with 2.0) -->
     <div id="window0" hidden>
       <!-- -20px margin to fix overflow issue. Makes XWin Resizing work.-->
       <div id="window0header" style='text-align:right;margin-left:-20px;'>
         SearchParty 1.0
         <button type='button' id='XWinButton' onclick='_xwinclosewindow(0,"searchParty")'>X</button>
         
       </div>
       <div style='text-align:left;'>
  <input style='width:100%;margin-left:-2px;' id='_SEARCHPARTYURL'>
         <div id='_SEARCHPARTYCANVAS'>
         </div>
       </div>
</div>
     <!-- Cool Terminal App -->
         <div id="window1" hidden>
           <div id="window1header" style='text-align:right;margin-left:-20px;'>
           Terminal
           <button type='button' id='XWinButton' onclick='_xwinclosewindow(1,"terminal")'>X</button>
           </div>
           <div style='background:rgb(20,20,30);color:white;font-family:monospace;height:100%;text-align:left;opacity:0;' id='TERMINAL_START'>
           </div>
         </div>
     <!-- File Manager (WIP) -->
      <div id='window2' hidden>
             <div id="window2header" style='text-align:right;margin-left:-20px;'>
               Files
               <button type='button' id='XWinButton' onclick='_xwinclosewindow(2,"files")'>X</button>
             </div>
        <div style='text-align:left;margin-left:8px;'>
        <br>
        <span class='material-icons filemgr_folder' title='Downloads'>folder</span>
        <span class='material-icons filemgr_folder' title='Photos'>folder</span>
        <span class='material-icons filemgr_folder' title='Music'>folder</span>
        <span class='material-icons filemgr_folder' title='Videos'>folder</span>
        </div>
           </div>
     <div id="window3" style='user-select:none;' hidden>
           <div id="window3header" style='text-align:right;margin-left:-20px;'>
           Settings
           <button type='button' id='XWinButton' onclick='_xwinclosewindow(3,"settings")'>X</button>
           </div>
       <div style='text-align:left;margin-left:4px;margin-right:4px;'>
           <h2 class='thinheader'>Settings</h2>
           <hr>
         <button class='material-icons taskbarico' title='Wallpaper' onclick='bkgsel()'>wallpaper</button>
         <button class='material-icons taskbarico' title='Battery' onclick='battery_settings()'>battery_full</button>
       </div>
         </div>
   </div>
   <footer id="taskbar">
     <span class="material-icons taskbarico" title='Apps'>apps</span>
     <span class='sep1'></span>
     <button class="material-icons taskbarico" style='color:rgb(80,205,235);margin-left:6px;' title='SearchParty' onclick='_xwinclosewindow(0,"searchParty")' type='button'>explore</button>
     <button class="material-icons taskbarico" style='color:#FFF2B9;' title='Files' type='button' onclick='_xwinclosewindow(2,"files")'>folder</button>
     <button class="material-icons taskbarico bkgblack" style='color:#FFFFFF;' title='Terminal' onclick='_xwinclosewindow(1,"terminal")' type='button'>chevron_right</button>
     <button class="material-icons taskbarico" style='color:rgb(160,160,160);' title='Settings' type='button' onclick='_xwinclosewindow(3,"settings")'>settings</button>
    </footer>
</body>
  <script>
  // Splash Manager (Skipped since we are debugging)
  // setTimeout(() => {  document.getElementById("SPLASH_LUNAOS").style.display = "none"; document.getElementById("page-container").style.display = "block";}, 3000);
  // Global Vars
    var terminalOpen=false;
    var searchPartyOpen=false;
    var filesOpen=false;
    var settingsOpen=false;
    let batteryValue; // Define Battery Level!
    const lunaOSVersion=1;
    const defaultServer='luna.microlemur.net'; // Default Server location (I am using the default server powered by Microlemur)
  // Make the DIV an xwindow
_xwinspawnwindow(document.getElementById("window0"));
_xwinspawnwindow(document.getElementById("window1"));
_xwinspawnwindow(document.getElementById("window2"));
_xwinspawnwindow(document.getElementById("window3"));
function DEVMODE_SETUP_TSK(){
  document.getElementById("body").innerHTML='<h1 class="thinheader">&ensp;Welcome to LunaOS</h1><hr style="color:white"><p>&ensp;One last thing. Do you want to enable DevMode? This will void any GitHub issue reports but enabled extra debbuging features and lets you sideload Lux Kernel Modules without any checks. <br><i>Hint: If you do not know what Lux Kernel is/want, do not enable DevMode!</i></p><div style="text-align:center;"><button type="button" class="confirm" onclick="localStorage.setItem(`LUNAOS_DEVMODE`,`ENABLED`);">Enable DevMode</button>&ensp;<button type="button" class="deny" onclick="localStorage.setItem(`LUNAOS_DEVMODE`,`DISABLED`">Do Not Enable DevMode</button></div>';
}
function VFS_SETUP_TSK(){ 
     document.getElementById("body").innerHTML='<h1 class="thinheader">&ensp;Welcome to LunaOS</h1><hr style="color:white"><p>&ensp;Do you want a VFS Service enabled? It will store things in your browser which adds more functionality to LunaOS and certain apps.</p><div style="text-align:center;"><button type="button" class="confirm" onclick="localStorage.setItem(`VFS_SERVICE_STATUS`,`ENABLED`);DEVMODE_SETUP_TSK();">Enable VFS Service</button>&ensp;<button type="button" class="deny" onclick="localStorage.setItem(`VFS_SERVICE_STATUS`,`DISABLED`);DEVMODE_SETUP_TSK();">Disable VFS Service</button></div>'
   }
function SETUP(){
  if(localStorage.getItem("_LUNAOS_SETUP")=='COMPLETE'){
    console.log('[SETUP]: LunaOS is already setup. Ignoring...')
  }else{
    console.log('[SETUP]: LunaOS is not setup. Starting SETUP...');
    document.getElementById("body").innerHTML='<h1 class="thinheader">&ensp;Welcome to LunaOS</h1><hr style="color:white"><p>&ensp;Please read and accept the License before using LunaOS:</p><br><code>&ensp;LunaOS is licensed under the LGPL v2.1 License. This means the following:<br>&ensp;- You may use the included libraries <i>unmodified</i> with only credit to the original prgoram.<br>&ensp;- If modifications are made you are subject to abide by the <i>full </i>LGPL v2.1 License which can be found <a href="https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html">here</a><br>&ensp;- The author (Microlemur) provides no warrenty or liability with this software.<br>&ensp;- All forks should be licensed under LGPLv2.1 or newer (LGPLv3 is fine).<br>&ensp;- You must state any changes in forks of LunaOS</code><hr style="color:white;"><input id="acceptlicense" type="checkbox">I Accept the License<br>&ensp;<button type="button" class="confirm" onclick="VFS_SETUP_TSK()">Continue</button>';

  }
} // This just checks if LunaOS is not setup
function battery_settings(){
  if(settingsOpen==true){

  }
} // Just battery settings
// XWin Library 
function _xwinclosewindow(window,task) {
  var x = document.getElementById("window"+window);
  if (x.style.display === "none") {
    x.style.display = "block";
    Function(task+"Open=true;")
  } else {
    x.style.display = "none";
    Function(task+"Open=false;")
  }
} 
function _xwinspawnwindow(elmnt,windownum) {
  let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    // if present, the header is where you move the DIV from:
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    // otherwise, move the DIV from anywhere inside the DIV:
    elmnt.onmousedown = dragMouseDown;
  } // TODO: ADD MULTI XWINDOWS

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    document.onmousemove = _xwindrag;
  }

  function _xwindrag(e) {
    e = e || window.event;
    e.preventDefault();
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
// SearchParty 1.0 Engine
async function _SearchScraper(server,website){
  if(searchPartyOpen===true){
  if(website=='party:/index'){
    let fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", server+'/private/index.js') // Read Server, then call the imported function (which should be the website name but replace . with _)
        let _funccall=website.replace(".", "_");
        Function('"use strict";SSserverIndex();'); // Execute Website Call
  }
  else{
        let fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", server+'/'+website) // Read Server, then call the imported function (which should be the website name but replace . with _)
        let _funccall=website.replace(".", "_");
        Function('"use strict";'+_funccall+'();'); // Execute Website Call
  }
 }
} // Searches a Server for Website (Uses a stupid JS Based Call System, but I will see if SearchParty 2.0 has better speed)
// Terminal Runner (Just a really basic script)
function _TerminalReturnCMD(e){
  if(terminalOpen===true){
      let _keynum;
      let currentCMD='';
      let inj=document.getElementById('TERMINAL_START');
  if(e.which){                 
    _keynum = e.which;
    currentCMD+=_keynum;
    inj.innerHTML+=_keynum;
   }
  }
} // Returns a command typed (Super Cool m8!)
function _TerminalEXEC(cmd){
 if(terminalOpen===true){
  if(cmd=='help'){
    return 'Just add JavaScript ;)';
  }else if(cmd=='squidkid'){
    return 'Marie asked me to tell you to stay fresh!';
  }else{
  Function(cmd);
  }
 }
} // Terminal Execution
function gameMode(){
console.log('Starting GameMode...');
    terminalOpen=false;
    searchPartyOpen=false;
    filesOpen=false;
    settingsOpen=false;
console.log('GameMode Ready!');
} // GameMode forces it so the game has most resources. 
  </script>
</html>
